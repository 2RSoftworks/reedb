<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Reedb::Core
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Reedb/Core.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Reedb.html" title="Reedb (module)">Reedb</a></span></span>
     &raquo; 
    <span class="title">Core</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Reedb::Core
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1"><span class='object_link'><a href="../Reedb.html" title="Reedb (module)">Reedb</a></span></dd>
      
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/reedb.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Core submodule of the Interface stack</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  



  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../Reedb.html" title="Reedb (module)">Reedb</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Reedb.html#DAEMON_INACTIVE_VAULT_ERROR-constant" title="Reedb::DAEMON_INACTIVE_VAULT_ERROR (constant)">DAEMON_INACTIVE_VAULT_ERROR</a></span>, <span class='object_link'><a href="../Reedb.html#DAEMON_UNAUTHORISED_TOKEN_ERROR-constant" title="Reedb::DAEMON_UNAUTHORISED_TOKEN_ERROR (constant)">DAEMON_UNAUTHORISED_TOKEN_ERROR</a></span>, <span class='object_link'><a href="../Reedb.html#DAEMON_UNKNOWN_TOKEN_ERROR-constant" title="Reedb::DAEMON_UNKNOWN_TOKEN_ERROR (constant)">DAEMON_UNKNOWN_TOKEN_ERROR</a></span>, <span class='object_link'><a href="../Reedb.html#DEF_MASTER_PATH-constant" title="Reedb::DEF_MASTER_PATH (constant)">DEF_MASTER_PATH</a></span>, <span class='object_link'><a href="../Reedb.html#FILE_CACHE_TIME-constant" title="Reedb::FILE_CACHE_TIME (constant)">FILE_CACHE_TIME</a></span>, <span class='object_link'><a href="../Reedb.html#FILE_MALFORMED_DATA_ERROR-constant" title="Reedb::FILE_MALFORMED_DATA_ERROR (constant)">FILE_MALFORMED_DATA_ERROR</a></span>, <span class='object_link'><a href="../Reedb.html#KEY_CACHE_TIME-constant" title="Reedb::KEY_CACHE_TIME (constant)">KEY_CACHE_TIME</a></span>, <span class='object_link'><a href="../Reedb.html#NET_PORT-constant" title="Reedb::NET_PORT (constant)">NET_PORT</a></span>, <span class='object_link'><a href="../Reedb.html#TOKEN_BYTE_SIZE-constant" title="Reedb::TOKEN_BYTE_SIZE (constant)">TOKEN_BYTE_SIZE</a></span>, <span class='object_link'><a href="../Reedb.html#VAULT_FILE_NOT_FOUND_ERROR-constant" title="Reedb::VAULT_FILE_NOT_FOUND_ERROR (constant)">VAULT_FILE_NOT_FOUND_ERROR</a></span>, <span class='object_link'><a href="../Reedb.html#VERSION-constant" title="Reedb::VERSION (constant)">VERSION</a></span></p>





  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#init-class_method" title="init (class method)">+ (Object) <strong>init</strong>(options) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initialise Reedb with a set of parameters passed into this method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate-class_method" title="terminate (class method)">+ (Object) <strong>terminate</strong>(reason = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Terminate Reedb with a reason.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Reedb.html" title="Reedb (module)">Reedb</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Reedb.html#archos-class_method" title="Reedb.archos (method)">archos</a></span>, <span class='object_link'><a href="../Reedb.html#daemon%3F-class_method" title="Reedb.daemon? (method)">daemon?</a></span>, <span class='object_link'><a href="../Reedb.html#included-class_method" title="Reedb.included (method)">included</a></span>, <span class='object_link'><a href="../Reedb.html#passlength-class_method" title="Reedb.passlength (method)">passlength</a></span>, <span class='object_link'><a href="../Reedb.html#verbose%3F-class_method" title="Reedb.verbose? (method)">verbose?</a></span></p>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="init-class_method">
  
    + (<tt>Object</tt>) <strong>init</strong>(options) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initialise Reedb with a set of parameters passed into this method. Please
check the wiki to find out what option parameters are available to use
here.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Parameters to run Reedb by sorted in a hash datastructure.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>nil</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/reedb.rb', line 212</span>

<span class='kw'>def</span> <span class='id identifier rubyid_init'>init</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
	<span class='cvar'>@@daemon</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:daemon</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:daemon</span><span class='rbracket'>]</span> <span class='kw'>else</span> <span class='kw'>true</span> <span class='kw'>end</span>
	<span class='cvar'>@@archos</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:os</span><span class='rbracket'>]</span>
	<span class='cvar'>@@pw_length</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pw_length</span><span class='rbracket'>]</span>
	<span class='cvar'>@@verbose</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:verbose</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='kw'>else</span> <span class='kw'>false</span> <span class='kw'>end</span>
	<span class='cvar'>@@no_token</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:no_token</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:no_token</span><span class='rbracket'>]</span> <span class='kw'>else</span> <span class='kw'>false</span> <span class='kw'>end</span>

	<span class='kw'>if</span> <span class='cvar'>@@no_token</span>
		<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NO_TOKEN mode has not been implemented yet! Please just use token authentication mode.</span><span class='tstring_end'>&quot;</span></span>
		<span class='cvar'>@@no_token</span> <span class='op'>=</span> <span class='kw'>false</span>
	<span class='kw'>end</span>
	
	<span class='cvar'>@@path</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:path</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:path</span><span class='rbracket'>]</span> <span class='kw'>else</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;&amp;HOME&amp;&amp;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>end</span>

	<span class='comment'># Enable cleanup mode
</span>	<span class='comment'># This means that the config will be cleaned and unused tokens removed
</span>	<span class='comment'># instead of leaving them in the file and configurations.
</span>	<span class='comment'># It is recommended to use cleanup mode.
</span>	<span class='comment'>#
</span>	<span class='cvar'>@@cleanup</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:cleanup</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cleanup</span><span class='rbracket'>]</span> <span class='kw'>else</span> <span class='kw'>true</span> <span class='kw'>end</span>

	<span class='comment'># Set of vaults that map a VaultBuffer to the vault itself.
</span>	<span class='comment'># Never exposed outside the API
</span>	<span class='comment'>#
</span>	<span class='cvar'>@@active_vaults</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
	
	<span class='comment'># List of tokens authorised for this daemon. Maps tokens to vault names.
</span>	<span class='comment'># This is used for authentication and never exposed to the outside API
</span>	<span class='comment'># NOTE! This is not used when the :no_token option is enabled
</span>	<span class='comment'>#
</span>	<span class='cvar'>@@tokens</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='cvar'>@@no_token</span>

	<span class='kw'>if</span> <span class='cvar'>@@archos</span> <span class='op'>==</span> <span class='symbol'>:linux</span>
		<span class='id identifier rubyid_master_path'>master_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~/.config/reedb/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

		<span class='comment'># Puts the folder in /etc if running as root
</span>		<span class='id identifier rubyid_master_path'>master_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/etc/reedb</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='const'>Utilities</span><span class='op'>::</span><span class='id identifier rubyid_parse_user'>parse_user</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>root</span><span class='tstring_end'>&#39;</span></span>

		<span class='id identifier rubyid_log_path'>log_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~/.config/reedb/logs/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
		<span class='cvar'>@@config_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_master_path'>master_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>master.cfg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

	<span class='kw'>elsif</span> <span class='cvar'>@@archos</span> <span class='op'>==</span> <span class='symbol'>:osx</span>
		<span class='id identifier rubyid_master_path'>master_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~/Library/Application\ Support/reedb/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
		<span class='id identifier rubyid_log_path'>log_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~/Library/Application\ Support/reedb/logs/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
		<span class='cvar'>@@config_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_master_path'>master_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>master.cfg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	<span class='kw'>else</span>
		<span class='comment'># Windows crap
</span>	<span class='kw'>end</span>

	<span class='comment'># Changing file permissions. Does this do ANYTHING on windows?
</span>	<span class='const'>FileUtils</span><span class='op'>::</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_log_path'>log_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># 744 (owned by $USER)
</span>	<span class='const'>FileUtils</span><span class='op'>::</span><span class='id identifier rubyid_chmod_R'>chmod_R</span><span class='lparen'>(</span><span class='int'>0744</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_log_path'>log_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	<span class='const'>FileUtils</span><span class='op'>::</span><span class='id identifier rubyid_chmod_R'>chmod_R</span><span class='lparen'>(</span><span class='int'>0744</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_master_path'>master_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	
	<span class='const'>Reedb</span><span class='op'>::</span><span class='const'>DaemonLogger</span><span class='period'>.</span><span class='id identifier rubyid_setup'>setup</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_log_path'>log_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	<span class='cvar'>@@started</span> <span class='op'>=</span> <span class='kw'>true</span>
	<span class='const'>Reedb</span><span class='op'>::</span><span class='const'>DaemonLogger</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Reedb was started successfully. Reading vault information now...</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>debug</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

	<span class='comment'># Now cache the config
</span>	<span class='id identifier rubyid_cache_config'>cache_config</span>

	<span class='comment'># Open debounce tread and mirror current vault information onto it.
</span>	<span class='comment'># debounce_handler
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="terminate-class_method">
  
    + (<tt>Object</tt>) <strong>terminate</strong>(reason = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Terminate Reedb with a reason. After calling this function the core
functionality (and depending interfaces on the stack) is no longer
available.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>reason</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Reason why Reedb is being terminated to be written into central logs.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>nil</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/reedb.rb', line 286</span>

<span class='kw'>def</span> <span class='id identifier rubyid_terminate'>terminate</span><span class='lparen'>(</span><span class='id identifier rubyid_reason'>reason</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Must start process first</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='cvar'>@@started</span>

	<span class='id identifier rubyid_new_reason'>new_reason</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unknown reason</span><span class='tstring_end'>&quot;</span></span>
	<span class='id identifier rubyid_new_reason'>new_reason</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a user request</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_reason'>reason</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user</span><span class='tstring_end'>&quot;</span></span>
	<span class='id identifier rubyid_new_reason'>new_reason</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a system request</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_reason'>reason</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span>

	<span class='comment'># My first easter-egg. Yay! :)
</span>	<span class='id identifier rubyid_new_reason'>new_reason</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>the illuminati</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_reason'>reason</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aliens</span><span class='tstring_end'>&quot;</span></span>

	<span class='const'>DaemonLogger</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[TERMINATION]: Scheduling termination because of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_reason'>new_reason</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

	<span class='comment'># TODO: Close the debounce thread here.
</span>
	<span class='cvar'>@@started</span> <span class='op'>=</span> <span class='kw'>false</span>
	<span class='comment'># Closing open vaults here
</span>	<span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='int'>0</span> <span class='semicolon'>;</span> <span class='cvar'>@@active_vaults</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span><span class='semicolon'>;</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='rbrace'>}</span>
	<span class='const'>DaemonLogger</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[TERMINATION]: Closed </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_counter'>counter</span><span class='embexpr_end'>}</span><span class='tstring_content'> vaults. Done!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sun May 17 23:17:06 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.5).
</div>

  </body>
</html>